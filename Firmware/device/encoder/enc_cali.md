`_enc_cali_tick_work` 校准原理

校准的原理是利用前面采集到的 200 个数据（每 1.8° 采集一个数据)，进行线性插值处理，将 200 个数据插值到 16384 个数据（而插值后的数据范围为 0-512000，即 256 * 200 = 512000，就是步进电机单圈脉冲数），这样磁编码器量程范围内的每个编码值都有一个插值数据与之对应，校准后利用磁编码器编码值作为作为插值数据数组下标查表得出校准值即可。最终的思想就是获取磁编码器的读数再查表就可以知道步进电机的位置是多少个脉冲。

`_enc_cali_verify` 寻找阶跃值作用

寻找区间下标及阶跃差值，用于寻找电机开始位置，因为电机不一定从 0 位置开始采集数据，通过循环的方式依次比较相邻两个数据的插值以寻找前面采集到的 200 个磁编码值数据中的数据阶跃值，与阶跃位置。需要寻找阶跃值的原因是，在校准数据采集阶段，采集开始时电机轴所处的位置不一定为 0，即磁编码值不为 0 我们也没有将电机驱动到 0 处再开始采集。所以采集到的磁编码器数据不是按照从小到大或从大到小依次排列的，例如排列方式为 [8192, 8193, ..., 16383, 16384, 0, 1, ..., 8190, 8191] 这种排列方式。

`_enc_cali` 校准数据采集流程（共采集 200 个数据）：

注意，电机运行方向不同采集到的数据排列规律不同，所以需要正转数据与反转数据进行计算。

(1) 失能状态：检测是否开启编码器校准流程
(2) 准备正向校准：驱动电机快速顺时针旋转一圈后停止（排除障碍物的干扰），准备采集顺时针旋转产生的角度数据。
(3) 正向测量：电机顺时针慢速转动，每转过 1.8 度采集 16 个角度数据，16 个数据采集完成后计算 16 个数据的平均值作为该点最终的角度数据。
(4) 反向回退：继续顺时针旋转使其达到一圈零 20 步，因为第 (3) 步的正向测量流程会超过一圈，所以干脆凑整，使其超过量凑整为 20 步，凑整后方便下一步消除。
(5) 反向消差：上一个步骤 (4) 产生了一个超位量，该超位量通过当前步骤逆时针驱动电机旋转 20 步以消除。
(6) 反向测量：步骤和正向测量流程相同，仅仅是电机旋转方向改为逆时针驱动。
(7) 解算：关闭校准功能，通过参数计算和存储功能函数解算采集到的 200 个角度数据。

